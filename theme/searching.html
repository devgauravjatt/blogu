<!-- Searching -->
<div class="w-11/12 md:w-8/12 xl:w-6/12 flex flex-col" id="search-list">
</div>

<script type="module">
   import Fuse from 'https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.mjs'
   const searchList = document.getElementById('search-list')

   let search = ''
   const data = {{ .Posts}}
   const params = new URLSearchParams(window.location.search);

   for (const [key, value] of params.entries()) {
      if (key === 's') {
         search = value
      }
   }

   const options = {
      keys: ['Title'],
      threshold: 0.3,
   }

   const fuse = new Fuse(data, options)

   const result = fuse.search(search)

   result.forEach(({item}) => {
      searchList.innerHTML += `
         <a href="/blog/${item.Slug}" class="block p-3 bg-bg rounded-md hover:bg-violet-700 hover:text-white transition duration-300">
            ${item.Title}
         </a>
         `
   })
</script>